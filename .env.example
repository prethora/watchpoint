# WatchPoint Local Development Environment
#
# Copy this file to .env (or .env.local) before running the application:
#
#   cp .env.example .env
#
# These variables configure the Host Go application to connect to the
# dockerized services (Postgres, MinIO, LocalStack) via localhost ports.
# Start the services first with: docker-compose up -d
#
# Values here match the ports and credentials defined in docker-compose.yml
# and the resources created by scripts/local-stack-init.sh.
#
# See architecture/03-config.md for the full configuration reference.

# =============================================================================
# System Metadata
# =============================================================================
APP_ENV=local
LOG_LEVEL=debug
OTEL_SERVICE_NAME=watchpoint-service
IS_TEST_MODE=false

# =============================================================================
# Server
# =============================================================================
PORT=8080
API_EXTERNAL_URL=http://localhost:8080
DASHBOARD_URL=http://localhost:3000

# =============================================================================
# Database (Postgres on localhost:5432)
# =============================================================================
# Connects to the 'postgres' service in docker-compose.yml.
# From the host, use localhost:5432 (not the container name).
DATABASE_URL=postgres://postgres:localdev@localhost:5432/watchpoint?sslmode=disable

# =============================================================================
# AWS / S3 (MinIO on localhost:9000)
# =============================================================================
# AWS_ENDPOINT_URL overrides the default AWS endpoint for S3 operations.
# Points to MinIO running in docker-compose.yml.
AWS_ENDPOINT_URL=http://localhost:9000
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin

FORECAST_BUCKET=watchpoint-forecasts
ARCHIVE_BUCKET=watchpoint-archive

# =============================================================================
# SQS (LocalStack on localhost:4566)
# =============================================================================
# SQS_ENDPOINT_URL is used by the SQS client to target LocalStack.
SQS_ENDPOINT_URL=http://localhost:4566

# Queue URLs match the queues created by scripts/local-stack-init.sh.
# LocalStack uses account ID 000000000000 for local queues.
SQS_EVAL_URGENT=http://localhost:4566/000000000000/eval-queue-urgent
SQS_EVAL_STANDARD=http://localhost:4566/000000000000/eval-queue-standard
SQS_NOTIFICATIONS=http://localhost:4566/000000000000/notification-queue
SQS_DLQ=http://localhost:4566/000000000000/dead-letter-queue-shared

# =============================================================================
# Billing (Stripe) - dummy values for local development
# =============================================================================
STRIPE_SECRET_KEY=sk_test_local_dummy_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_local_dummy_stripe_webhook_secret
STRIPE_PUBLISHABLE_KEY=pk_test_local_dummy_stripe_publishable_key

# =============================================================================
# Email (AWS SES) - uses IAM for authentication, no API key needed
# =============================================================================
EMAIL_FROM_ADDRESS=alerts@watchpoint.io
EMAIL_FROM_NAME=WatchPoint Alerts
EMAIL_PROVIDER=ses
SES_REGION=us-east-1

# =============================================================================
# Forecast (RunPod) - dummy values for local development
# =============================================================================
RUNPOD_API_KEY=rp_local_dummy_runpod_api_key
RUNPOD_ENDPOINT_ID=local-dummy-endpoint-id

# =============================================================================
# Auth (OAuth) - dummy values for local development
# =============================================================================
GOOGLE_CLIENT_ID=local-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-local-dummy-google-secret
GITHUB_CLIENT_ID=local-github-client-id
GITHUB_CLIENT_SECRET=ghp_local_dummy_github_secret_value
SESSION_KEY=local-dev-session-key-minimum-32-chars-long-for-validation

# =============================================================================
# Security
# =============================================================================
ADMIN_API_KEY=local-dev-admin-api-key-for-testing
CORS_ALLOWED_ORIGINS=*

# =============================================================================
# Observability
# =============================================================================
METRIC_NAMESPACE=WatchPoint
ENABLE_TRACING=false

# =============================================================================
# Webhooks
# =============================================================================
WEBHOOK_USER_AGENT=WatchPoint-Webhook/1.0
WEBHOOK_TIMEOUT=10s
WEBHOOK_MAX_REDIRECTS=3

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_ENABLE_NOWCAST=true
FEATURE_ENABLE_EMAIL=true
